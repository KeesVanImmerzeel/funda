gsub("^ ", "", .) %>%
gsub("  ", " ", .) %>%
strsplit(., " ") %>%
unlist() %>%
as.numeric() %>%
max(.)
return(x)
}
nr_of_pages(url)
use_package("dplyr")
document
document()
rm(list = c("nr_of_pages"))
document()
document()
document()
library(magrittr)
nr_of_pages <- function(url) {
x <- xml2::read_html(url) %>%
rvest::html_node(".pagination")  %>%
rvest::html_text() %>%
gsub("\r\n", "", .) %>%
gsub(" ", "", .) %>%
gsub("Pagina", " ", .)  %>%
gsub("van", " ", .)  %>%
gsub("Volgende", "", .) %>%
gsub("^ ", "", .) %>%
gsub("  ", " ", .) %>%
strsplit(., " ") %>%
unlist() %>%
as.numeric() %>%
max(.)
return(x)
}
nr_of_pages(url)
document()
rm(list = c("nr_of_pages"))
document()
document()
load_all()
gemeente <- "Gemeente Oost Gelre"
adj_gemeente_str(gemeente)
document(0)
document()
use_package("stringr")
document()
create_gemeente_url(gemeente)
document()
load_all()
create_gemeente_urls(gemeente)
document()
load_all()
create_gemeente_htmls(gemeente)
x <- create_gemeente_htmls(gemeente)
x[1]
x[[1]]
str(x[[1]])
html_page <- x[[1]]
is_huis_info_link(html_page)
load_all()
is_huis_info_link(html_page)
html_page <- x[1]
is_huis_info_link(html_page)
document()
load_all()
x <- create_gemeente_htmls(gemeente)
extract_adress_links(x[[1]])
str(x)
load_all()
x <- create_gemeente_htmls(gemeente)
extract_adress_links(x)
x <- create_gemeente_htmls(gemeente)
x
extract_adress_links(x[[1]])
load_all()
x <- create_gemeente_htmls(gemeente)
extract_adress_links(x[[1]])
document()
document()
load_all()
create_huis_urls("Doesburg" )
document()
create_huis_htmls("Doesburg" )
load_all()
create_huis_htmls("Doesburg" )
x <- create_house_htmls("Doesburg" )
library(devtools)
document()
document()
document()
load_all()
x <- create_house_htmls("Doesburg" )
?funda
?create_house_htmls
document()
library(devtools)
load_all()
document()
load_all()
x <- create_house_htmls("Doesburg" )
rep.int(1:4)
vrep <- Vectorize(rep.int)
vrep(1:4, 4:1)
gemeente <- c("Doesburg","Zevenaar")
create_house_htmls(gemeente)
f <- Vectorize(create_house_htmls,"gemeente")
f(gemeente)
f <- Vectorize(create_house_htmls,"gemeente")
f(gemeente)
x <- f(gemeente)
saveRDS(x,"d:/tmp/x.res")
use_data_raw()
library(devtools)
load_all()
x <- gemeente <- c("Doesburg")
x <- create_house_htmls(gemeente)
saveRDS(x,"c:/tmp/x.rds")
str(x)
str(x[1])
str(x[[1]]])
str(x[[1]])
html_doc <- x[[1]]
load_all()
extract_address(html_doc)
load_all()
extract_address(html_doc)
load_all()
extract_address(html_doc)
load_all()
extract_address(html_doc)
load_all()
extract_address(html_doc)
load_all()
extract_address(html_doc)
load_all()
extract_address(html_doc)
load_all()
extract_address(html_doc)
lapply(x,extract_address)
f <- Vectorize(extract_address,"html_doc")
f(x)
str(f(x))
test <- str(f(x))
test[1]
test <- f(x)
test[1]
test[2]
str(test)
load_all()
library(devtools)
document()
document()
load_all()
#gemeente <- c("Doesburg")
#x <- create_house_htmls(gemeente)
#saveRDS(x,"c:/tmp/x.rds")
house_htmls <- readRDS("c:/tmp/x.rds")
fd_extract_addresses(house_htmls)
extract_address(extract_address[[1]])
house_htmls <- fd_create_house_htmls("Doesburg" )
saveRDS(house_htmls,"c:/tmp/house_htmls.rds")
gemeente
gemeente <- c("Doesburg")
house_htmls <- fd_create_house_htmls(gemeente)
saveRDS(house_htmls,"c:/tmp/house_htmls.rds")
house_htmls <- readRDS("c:/tmp/house_htmls.rds")
html_doc <- x[[1]]
html_doc <- house_htmls[[1]]
extract_address(html_doc)
str(house_htmls)
extract_address(house_htmls[[1]])
extract_address(house_htmls[1])
house_htmls[[1]]
str( house_htmls)
str(house_htmls[[1]])
html_doc <- house_htmls[[1]]
html_doc %>% rvest::html_node(".object-header__title")
library(devtools)
load_all()
house_htmls <- readRDS("c:/tmp/house_htmls.rds")
fd_extract_addresses(house_htmls)
house_htmls[[1]] %>% rvest::html_node(".object-header__title")
house_htmls[[1]] %>% html_node(".fd-align-items-center+ .fd-m-right-xl--bp-m .fd-text--nowrap")  %>%
html_text()
house_htmls <- fd_create_house_htmls("Doesburg" )
saveRDS(house_htmls,"c:/tmp/house_htmls.rds")
html_doc <- house_htmls[[1]]
extract_address(html_doc)
fd_extract_addresses(house_htmls)
house_htmls <- readRDS("c:/tmp/house_htmls.rds")
html_doc <- house_htmls[[1]]
extract_address(html_doc)
house_htmls <- create_house_htmls("Doesburg" )
load_all()
house_htmls <- create_house_htmls("Doesburg" )
house_htmls <- fd_create_house_htmls("Doesburg" )
html_doc <- house_htmls[[1]]
extract_core_urls_from_html(html_doc)
fd_extract_addresses(house_htmls)
html_doc <- house_htmls[[2]]
extract_core_urls_from_html(html_doc)
html_doc <- house_htmls[[3]]
extract_core_urls_from_html(html_doc)
html_doc <- house_htmls[[4]]
extract_core_urls_from_html(html_doc)
html_doc <- house_htmls[[5]]
extract_core_urls_from_html(html_doc)
html_doc <- house_htmls[[6]]
extract_core_urls_from_html(html_doc)
html_doc <- house_htmls[[7]]
extract_core_urls_from_html(html_doc)
html_doc <- house_htmls[[8]]
extract_core_urls_from_html(html_doc)
html_doc <- "funda.nl/koop/doesburg/huis-41783550-tussenwoningen-type-b-bouwnr-6/" %>% xml2::read_html()
html_doc <- "https://www.funda.nl/koop/doesburg/huis-41783668-hoekwoningen-type-d-bouwnr-7/" %>% xml2::read_html()
html_doc$doc %>% as.string()
html_doc$doc %>% as.character()
load_all()
is_nieuwbouw(html_doc)
gsub
?gsub
grep(is_nieuwbouw(html_doc),"nieuwbouw",ignore.case=TRUE)
is_nieuwbouw(html_doc)
grep("nieuwbouw",is_nieuwbouw(html_doc),ignore.case=TRUE)
load_all()
is_nieuwbouw(html_doc)
html_doc <- house_htmls[[1]]
is_nieuwbouw(html_doc)
load_all()
x <- create_house_urls("Doesburg")
x <- create_gemeente_htmls(gemeente)
gemeente <- "Doesburg"
x <- create_gemeente_htmls(gemeente)
x
lapply(x, extract_core_urls_from_html)
lapply(x, extract_core_urls_from_html)
x
library(devtools)
house_htmls <- fd_create_house_htmls("Doesburg" )
load_all()
load_all()
document()
document()
document()
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
html_doc <- house_htmls
html_doc <- house_htmls[[1]]
is_new_construction(html_doc)
load_all()
is_new_construction(html_doc)
x <- html_doc %>% rvest::html_node(".object-kenmerken-list:nth-child(5) .fd-align-items-center:nth-child(4)")  %>%
rvest::html_text()
x
grep("nieuwbouw",x,ignore.case=TRUE)
length(grep("nieuwbouw",x,ignore.case=TRUE))
load_all()
is_new_construction(html_doc)
is_new_construction(house_htmls)
document()
document()
load_all()
fd_is_new_construction(house_htmls)
load_all()
fd_is_new_construction(house_htmls)
length(fd_is_new_construction(house_htmls))
length(house-htmls)
length(house_htmls)
fd_extract_addresses(house_htmls)
length(fd_extract_addresses(house_htmls))
document()
document()
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
fd_is_new_construction(house_htmls)
fd_extract_addresses(house_htmls)
document()
document()
document()
document()
document()
document()
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
document()
document()
load_all()
html_doc <- house_htmls[[1]]
.plot_area(html_doc)
document()
load_all()
fd_plot_area(house_htmls)
fd_is_new_construction(house_htmls)
fd_addresses(house_htmls)
x <- fd_addresses(house_htmls)
x[28]
load_all()
fd_plot_area(house_htmls)
x[8]
x[17]
?max()
load_all()
fd_plot_area(house_htmls)
load_all()
document()
fd_plot_area(house_htmls)
load_all()
fd_plot_area(house_htmls)
?max()
load_all()
fd_plot_area(house_htmls)
load_all()
fd_plot_area(house_htmls)
library(devtools)
document()
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
html_doc <- house_htmls
html_doc <- house_htmls[[1]]
load_all()
x <- .fd_type(html_doc)
x
load_all()
x <- .fd_type(html_doc)
x
?gsub
grep("^\r\n",x)
grep("\r\n$",x)
sub("\r\n$",x)
sub("\r\n",x,ignore.case=TRUE,X)
sub("\r\n",x,ignore.case=TRUE,x)
sub("\\r\\n",x,ignore.case=TRUE,x)
sub('[\n\r]','',x)
sub('[\r\n]','',x)
sub('[\r]','',x)
sub('[\r\\n]','',x)
sub('[\r|\n]','',x)
gsub('[\r\n][\r\n]',' ',x,perl=TRUE)
gsub('[\r\n][\r\n]','',x,perl=TRUE)
load_all()
x <- .fd_type(html_doc)
x
load_all()
document()
load_all()
fd_type(house_htmls)
document()
load(all)
load_all()
fd_type(house_htmls)
document()
document()
document()
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
str(hous_htmls)
str(house_htmls)
house_htmls <- fd_create_house_htmls(c("Doesburg","Zevenaar" ))
str(house_htmls)
length(house_htmls)
str(house_htmls$Doesburg)
names(house_htmls)
names(house_htmls[[1]])
names(house_htmls$Doesburg)
fd_addresses(house_htmls)
fd_addresses(house_htmls$Doesburg)
names(house_htmls$Doesburg)
is.null(names(house_htmls$Doesburg))
length(names(house_htmls$Doesburg))
length(names(house_htmls))
load_all()
load_all()
fd_addresses(house_htmls)
str(house_htmls)
length(house_htmls)
load_all()
fd_addresses(house_htmls)
?lapply
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=TRUE)
load_all()
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=TRUE)
str(x)
x
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=TRUE) %>% unlist()
str(x)
x
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=FALSE) %>% unlist()
x
names(x)
names(x) <- NULL
x
load_all()
x <- fd_addresses(house_htmls)
load_all()
x <- fd_addresses(house_htmls)
load_all()
x <- fd_addresses(house_htmls)
str(house_htmls)
house_htmls$Zevenaar
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
load_all()
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
length(house_htmls)
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
load_all()
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
x
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE) %>% unlist()
x
names(x) <- NULL
X
x
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
str(x)
test <- lapply(x, unlist)
str(test)
test
test <- lapply(x, unlist, recursive=TRUE)
test
str(test)
str(x)
test <- unlist(x, recursive=TRUE)
test
test <- unlist(x, recursive=TRUE)
names(test) <- NULL
test
load_all()
fd_addresses(house_htmls)
load_all()
fd_addresses(house_htmls$Doesburg)
test <- house_htmls %>% unlist(recursive=TRUE)
str(test)
lengt(house_htmls)
length(house_htmls)
length(house_htmls$Doesburg)
test <- house_htmls %>% unlist(recursive=FALSE)
str(test)
length(test)
load_all()
fd_addresses(house_htmls)
?Vectorize
load_all()
fd_addresses(house_htmls)
load_all()
fd_addresses(house_htmls)
fd_plot_area(house_htmls)
fd_type(house_htmls)
x <- fd_type(house_htmls)
length(x)
x <- fd_plot_area(house_htmls)
length(x)
x <- fd_addresses(house_htmls)
length(x)
x
x <- fd_type(house_htmls)
x
document()
document()
document()
document()
document()
library(devtools)
document()
document()
document()
document()
document()
document()
document()
library(devtools)
load_all()
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls(c("Doesburg","Zevenaar"))
getwd()
## code to prepare `DATASET` dataset goes here
save(houst_htmls, file="data-raw/house_htmls.Rdata")
## code to prepare `DATASET` dataset goes here
save(house_htmls, file="data-raw/house_htmls.Rdata")
test <- read("data-raw/house_htmls.Rdata")
house_htmls <- load("data-raw/house_htmls.Rdata")
str(test)
str(house_htmls)
library(devtools)
load_all()
house_htmls <- load("data-raw/house_htmls.Rdata")
house_htmls
house_htmls <- fd_create_house_htmls(c("Doesburg","Zevenaar"))
str(house_htmls)
x <- fd_type(house_htmls)
x
str(house_htmls)
x <- fd_type(house_htmls$Doesburg)
str(house_htmls)
str(house_htmls)
length(house_htmls)
length(house_htmls$Doesburg)
names(house_htmls)
names(house_htmls$Doesburg)
is.null(names(house_htmls))
is.null(names(house_htmls$Doesburg))
length(house_htmls)
load_all()
.nr_of_gemeenten(house_htmls)
.nr_of_gemeenten(house_htmls$Doesburg)
load_all()
fd_type(house_htmls)
fd_type(house_htmls$Doesburg)
