html_doc <- "funda.nl/koop/doesburg/huis-41783550-tussenwoningen-type-b-bouwnr-6/" %>% xml2::read_html()
html_doc <- "https://www.funda.nl/koop/doesburg/huis-41783668-hoekwoningen-type-d-bouwnr-7/" %>% xml2::read_html()
html_doc$doc %>% as.string()
html_doc$doc %>% as.character()
load_all()
is_nieuwbouw(html_doc)
gsub
?gsub
grep(is_nieuwbouw(html_doc),"nieuwbouw",ignore.case=TRUE)
is_nieuwbouw(html_doc)
grep("nieuwbouw",is_nieuwbouw(html_doc),ignore.case=TRUE)
load_all()
is_nieuwbouw(html_doc)
html_doc <- house_htmls[[1]]
is_nieuwbouw(html_doc)
load_all()
x <- create_house_urls("Doesburg")
x <- create_gemeente_htmls(gemeente)
gemeente <- "Doesburg"
x <- create_gemeente_htmls(gemeente)
x
lapply(x, extract_core_urls_from_html)
lapply(x, extract_core_urls_from_html)
x
library(devtools)
house_htmls <- fd_create_house_htmls("Doesburg" )
load_all()
load_all()
document()
document()
document()
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
html_doc <- house_htmls
html_doc <- house_htmls[[1]]
is_new_construction(html_doc)
load_all()
is_new_construction(html_doc)
x <- html_doc %>% rvest::html_node(".object-kenmerken-list:nth-child(5) .fd-align-items-center:nth-child(4)")  %>%
rvest::html_text()
x
grep("nieuwbouw",x,ignore.case=TRUE)
length(grep("nieuwbouw",x,ignore.case=TRUE))
load_all()
is_new_construction(html_doc)
is_new_construction(house_htmls)
document()
document()
load_all()
fd_is_new_construction(house_htmls)
load_all()
fd_is_new_construction(house_htmls)
length(fd_is_new_construction(house_htmls))
length(house-htmls)
length(house_htmls)
fd_extract_addresses(house_htmls)
length(fd_extract_addresses(house_htmls))
document()
document()
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
fd_is_new_construction(house_htmls)
fd_extract_addresses(house_htmls)
document()
document()
document()
document()
document()
document()
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
document()
document()
load_all()
html_doc <- house_htmls[[1]]
.plot_area(html_doc)
document()
load_all()
fd_plot_area(house_htmls)
fd_is_new_construction(house_htmls)
fd_addresses(house_htmls)
x <- fd_addresses(house_htmls)
x[28]
load_all()
fd_plot_area(house_htmls)
x[8]
x[17]
?max()
load_all()
fd_plot_area(house_htmls)
load_all()
document()
fd_plot_area(house_htmls)
load_all()
fd_plot_area(house_htmls)
?max()
load_all()
fd_plot_area(house_htmls)
load_all()
fd_plot_area(house_htmls)
library(devtools)
document()
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
html_doc <- house_htmls
html_doc <- house_htmls[[1]]
load_all()
x <- .fd_type(html_doc)
x
load_all()
x <- .fd_type(html_doc)
x
?gsub
grep("^\r\n",x)
grep("\r\n$",x)
sub("\r\n$",x)
sub("\r\n",x,ignore.case=TRUE,X)
sub("\r\n",x,ignore.case=TRUE,x)
sub("\\r\\n",x,ignore.case=TRUE,x)
sub('[\n\r]','',x)
sub('[\r\n]','',x)
sub('[\r]','',x)
sub('[\r\\n]','',x)
sub('[\r|\n]','',x)
gsub('[\r\n][\r\n]',' ',x,perl=TRUE)
gsub('[\r\n][\r\n]','',x,perl=TRUE)
load_all()
x <- .fd_type(html_doc)
x
load_all()
document()
load_all()
fd_type(house_htmls)
document()
load(all)
load_all()
fd_type(house_htmls)
document()
document()
document()
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
str(hous_htmls)
str(house_htmls)
house_htmls <- fd_create_house_htmls(c("Doesburg","Zevenaar" ))
str(house_htmls)
length(house_htmls)
str(house_htmls$Doesburg)
names(house_htmls)
names(house_htmls[[1]])
names(house_htmls$Doesburg)
fd_addresses(house_htmls)
fd_addresses(house_htmls$Doesburg)
names(house_htmls$Doesburg)
is.null(names(house_htmls$Doesburg))
length(names(house_htmls$Doesburg))
length(names(house_htmls))
load_all()
load_all()
fd_addresses(house_htmls)
str(house_htmls)
length(house_htmls)
load_all()
fd_addresses(house_htmls)
?lapply
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=TRUE)
load_all()
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=TRUE)
str(x)
x
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=TRUE) %>% unlist()
str(x)
x
x <- sapply(house_htmls,fd_addresses,simplify=TRUE,USE.NAMES=FALSE) %>% unlist()
x
names(x)
names(x) <- NULL
x
load_all()
x <- fd_addresses(house_htmls)
load_all()
x <- fd_addresses(house_htmls)
load_all()
x <- fd_addresses(house_htmls)
str(house_htmls)
house_htmls$Zevenaar
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
load_all()
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
length(house_htmls)
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
load_all()
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
x
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE) %>% unlist()
x
names(x) <- NULL
X
x
x <- sapply(house_htmls, fd_addresses, simplify = TRUE, USE.NAMES = FALSE)
str(x)
test <- lapply(x, unlist)
str(test)
test
test <- lapply(x, unlist, recursive=TRUE)
test
str(test)
str(x)
test <- unlist(x, recursive=TRUE)
test
test <- unlist(x, recursive=TRUE)
names(test) <- NULL
test
load_all()
fd_addresses(house_htmls)
load_all()
fd_addresses(house_htmls$Doesburg)
test <- house_htmls %>% unlist(recursive=TRUE)
str(test)
lengt(house_htmls)
length(house_htmls)
length(house_htmls$Doesburg)
test <- house_htmls %>% unlist(recursive=FALSE)
str(test)
length(test)
load_all()
fd_addresses(house_htmls)
?Vectorize
load_all()
fd_addresses(house_htmls)
load_all()
fd_addresses(house_htmls)
fd_plot_area(house_htmls)
fd_type(house_htmls)
x <- fd_type(house_htmls)
length(x)
x <- fd_plot_area(house_htmls)
length(x)
x <- fd_addresses(house_htmls)
length(x)
x
x <- fd_type(house_htmls)
x
document()
document()
document()
document()
document()
library(devtools)
document()
document()
document()
document()
document()
document()
document()
library(devtools)
load_all()
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls(c("Doesburg","Zevenaar"))
getwd()
## code to prepare `DATASET` dataset goes here
save(houst_htmls, file="data-raw/house_htmls.Rdata")
## code to prepare `DATASET` dataset goes here
save(house_htmls, file="data-raw/house_htmls.Rdata")
test <- read("data-raw/house_htmls.Rdata")
house_htmls <- load("data-raw/house_htmls.Rdata")
str(test)
str(house_htmls)
library(devtools)
load_all()
house_htmls <- load("data-raw/house_htmls.Rdata")
house_htmls
house_htmls <- fd_create_house_htmls(c("Doesburg","Zevenaar"))
str(house_htmls)
x <- fd_type(house_htmls)
x
str(house_htmls)
x <- fd_type(house_htmls$Doesburg)
str(house_htmls)
str(house_htmls)
length(house_htmls)
length(house_htmls$Doesburg)
names(house_htmls)
names(house_htmls$Doesburg)
is.null(names(house_htmls))
is.null(names(house_htmls$Doesburg))
length(house_htmls)
load_all()
.nr_of_gemeenten(house_htmls)
.nr_of_gemeenten(house_htmls$Doesburg)
load_all()
fd_type(house_htmls)
fd_type(house_htmls$Doesburg)
library(devtools)
x <- list()
x
str(x)
?c()
a <- c(1,2,3)
names(a)
names(a) <- "Doesburg"
a
names(a) <- NULL
c(x,a)
str(x)
names(x) <- "Doesburg"
load_all()
fd_create_house_htmls("onzin")
load_all()
fd_create_house_htmls("onzin")
x <- fd_create_house_htmls("Doesburg")
load_all()
fd_create_house_htmls("onzin")
?url.exists()
x <- list("Doesburg"=c(1,2,3))
x
load_all()
x <- fd_create_house_htmls("Doesburg")
load_all()
x <- fd_create_house_htmls("Doesburg")
x
x <- .create_house_htmls("Doesburg")
.create_house_htmls <- function(gemeente) {
urls <- .create_house_urls(gemeente)
return(apply(urls %>% as.array(), 1, xml2::read_html))
}
x <- .create_house_htmls("Doesburg")
test <- list(gemeenten=x)
names(test) <- "Doesburg"
load_all()
fd_create_house_htmls("Doesburg")
x <- fd_create_house_htmls("Doesburg")
x$Doesburg
.nr_of_gemeenten(x)
length(x)
house_htmls <- x
load_all()
fd_type(house_htmls)
load_all()
fd_type(h)
fd_type(house_htmls)
fd_addresses(house_htmls)
fd_plot_area(house_htmls)
house_htmls <- fd_create_house_htmls(c("Doesburg","Zevenaar"))
fd_type(house_htmls)
fd_addresses(house_htmls)
fd_plot_area(house_htmls)
lengths(x)
lengths(house_htmls)
str(lengths(house_htmls))
lengths(house_htmls) %>% as.data.frame
?rep()
rep(names(house_htmls),lengths(house_htmls))
load_all()
fd_gemeenten(house_htmls)
rep(names(house_htmls),lengths(house_htmls))
load_all()
fd_gemeenten(house_htmls)
document()
document()
house_htmls <- load("data-raw/house_htmls.Rdata")
str(house_htmls)
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
x <- fd_description(house_htmls)
str(x)
x[1]
load_all()
x <- fd_description(house_htmls)
x[1]
load_all()
x <- fd_description(house_htmls)
load_all()
x <- fd_description(house_htmls)
load_all()
load_all()
x <- fd_description(house_htmls)
?trimws()
load_all()
x <- fd_description(house_htmls)
x
x[1]
load_all()
x <- fd_description(house_htmls)
length(x)
x[31]
x %>% grep("gebruik", ., ignore.case = TRUE) %>% length() > 0
?grep()
x %>% as.array() %>% grep("gebruik", ., ignore.case = TRUE) %>% length() > 0
lapply(x, grep, pattern="gebruik")
#' Check if length the result of the 'grep' funciton opattern evalu
grep(woord, ., ignore.case = TRUE) %>% length() > 0 %>% unlist()
lapply(x, grep, pattern="gebruik") %>% unlist()
length(x)
?unlist()
?grep
.f <- function(x, , pattern) {
x %>% grep(pattern, ., ignore.case = TRUE) %>% length() > 0
}
.f <- function(x, pattern) {
x %>% grep(pattern, ., ignore.case = TRUE) %>% length() > 0
}
.f(x[1])
x[1]
pattern <- "puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput"
.f(x[1])
.f <- function(x, pattern) {
x %>% grep(pattern=pattern, ., ignore.case = TRUE) %>% length() > 0
}
.f(x[1])
pattern
.f <- function(x, pattern) {
grep(pattern, x, ignore.case = TRUE) %>% length() > 0
}
.f(x[1],pattern)
.f <- function(x, pattern) {
x %>% grep(pattern, ., ignore.case = TRUE) %>% length() > 0
}
.f(x[1],pattern)
x
x[1]
.f(x[1],pattern="achtertuin")
load_all()
load_all()
pattern <- "puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput"
x <- description(house_htmls, pattern)
x <- fd_description(house_htmls, pattern)
x <- fd_description(house_htmls, pattern=pattern)
pattern
str(fd_descr_match)
load_all()
x <- fd_description(house_htmls, pattern=pattern)
x <- fd_description(house_htmls, pattern)
x <- fd_descr_match(house_htmls, pattern)
x
document()
library(devtools)
load_all()
house_htmls <- fd_create_house_htmls("Doesburg" )
x <- house_htmls %>% fd_addresses()
x
x <- house_htmls %>% cbind(fd_addresses(),fd_type())
x <- house_htmls %>% cbind(fd_addresses(.),fd_type(.))
x
?cbind()
x <- house_htmls %>% cbind(fd_addresses(.),fd_type(.))
str(x)
x <- cbind(fd_addresses(house_htmls),fd_type(house_htmls))
x
x <- cbind(fd_gemeenten(house_htmls),fd_addresses(house_htmls),fd_type(house_htmls),fd_description(house_htmls),fd_descr_match(house_htmls,pattern="puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput"))
names(x)
head(x)
library(funda)
library(devtools)
load_all()
gemeenten <- c("Aalten","Arnhem","Doesburg","Doetinchem","Duiven", "Lochem","Rheden","Rozendaal", "Westervoort", "Winterswijk",
"Zevenaar", "Zutphen", "Oude IJsselstreek", "Oost Gelre", "Berkelland", "Bronckhorst", "Montferland")
pattern <-
"puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput"
gemeenten <- c("Aalten","Arnhem","Doesburg","Doetinchem","Duiven", "Lochem","Rheden","Rozendaal", "Westervoort", "Winterswijk",
"Zevenaar", "Zutphen", "Oude IJsselstreek", "Oost Gelre", "Berkelland", "Bronckhorst", "Montferland")
house_htmls <- fd_create_house_htmls(gemeenten)
pattern <-
"puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput"
df <- data.frame(
gemeente=fd_gemeenten(house_htmls),
adres=fd_addresses(house_htmls),
perceel_opp=fd_plot_area(house_htmls),
type_bouw=fd_type(house_htmls),
beschrijving=fd_description(house_htmls),
puntstuk=fd_descr_match(house_htmls, pattern = "puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput")
)
saveRDS(df,"data-raw/df.rds")
gemeenten <- c("Aalten","Arnhem","Doesburg","Doetinchem","Duiven", "Lochem","Rheden","Rozendaal", "Westervoort", "Winterswijk",
"Zevenaar", "Zutphen", "Oude IJsselstreek", "Oost Gelre", "Berkelland", "Bronckhorst", "Montferland")
house_htmls <- fd_create_house_htmls(gemeenten)
pattern <-
"puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput"
df <- data.frame(
gemeente=fd_gemeenten(house_htmls),
adres=fd_addresses(house_htmls),
perceel_opp=fd_plot_area(house_htmls),
type_bouw=fd_type(house_htmls),
beschrijving=fd_description(house_htmls),
puntstuk=fd_descr_match(house_htmls, pattern = "puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput")
)
saveRDS(df,"data-raw/df.rds")
library(devtools)
library(devtools)
load_all()
gemeenten <- c("Aalten","Arnhem","Doesburg","Doetinchem","Duiven", "Lochem","Rheden","Rozendaal", "Westervoort", "Winterswijk",
"Zevenaar", "Zutphen", "Oude IJsselstreek", "Oost Gelre", "Berkelland", "Bronckhorst", "Montferland")
house_htmls <- fd_create_house_htmls(gemeenten)
pattern <-
"puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput"
df <- data.frame(
gemeente=fd_gemeenten(house_htmls),
adres=fd_addresses(house_htmls),
perceel_opp=fd_plot_area(house_htmls),
type_bouw=fd_type(house_htmls),
beschrijving=fd_description(house_htmls),
puntstuk=fd_descr_match(house_htmls, pattern = "puntstuk|bron|waterbron|beregeningsbron|put|waterput|welput")
)
saveRDS(df,"data-raw/df.rds")
df
